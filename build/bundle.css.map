{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../App.svelte",
    "../../Form.svelte",
    "../../Media.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import '../node_modules/normalize.css/normalize.css'\n  import '../node_modules/milligram/dist/milligram.css'\n\timport Form from './Form.svelte'\n\timport Media from './Media.svelte'\n\n\timport { getMediaByCode } from 'instagram-stories'\n\n\tlet url, media\n  let mediaExist = true\n\n\tconst getMedia = async () => {\n    try {\n      const code = extractUrl(url)\n      const { graphql : { shortcode_media } } = await getMediaByCode(code)\n      const nodes = await extractMedia(shortcode_media)\n\n      media = Array.isArray(nodes) ? nodes : [ nodes ]\n      url = ''\n      mediaExist = true\n    } catch (error) {\n      media = []\n      url = ''\n      mediaExist = false\n    }\n  }\n\n  const extractUrl = (url) => {\n    const regex = /p\\/([_a-z0-9]+)/gi\n    const match = url.match(regex)\n\n    return (match) ? match.shift().substring(2) : url\n  }\n\n\tconst extractMedia = async (json) => {\n    switch (json.__typename) {\n      case 'GraphImage':\n        return {\n          typename: json.__typename,\n          src: json.display_resources.pop().src\n        }\n      case 'GraphVideo':\n        return {\n          typename: json.__typename,\n          src: json.video_url\n        }\n        return \n        break\n      case 'GraphSidecar':\n        const extractMediaPromises = json.edge_sidecar_to_children.edges\n          .map(item => extractMedia(item.node))        \n        const media = await Promise.all(extractMediaPromises)\n        return media\n        break\n      default:\n        return {\n          typename: json.__typename,\n          src: json.display_url\n        }\n        break\n    }\n  }\n\n  window.addEventListener('share', (e) => {\n    url = e.detail\n    getMedia()\n  }, false);\n</script>\n\n<style>\n  .header {\n    margin-top: 5rem;\n    max-width: 50%;\n  }\n  .footer {\n    margin: 5rem auto;\n  }\n  .alert.danger {\n    border-left: 0.3rem solid #e97979;\n  }\n</style>\n\n<div class=\"container\">\n  <header class=\"header\">\n    <h1>Yet! Another instagram downloader.</h1>\n  </header>\n\n  <main>\n    {#if !mediaExist}\n      <blockquote class=\"alert danger\">\n        <p><em>Media not found.</em></p>\n      </blockquote>\n    {/if}\n    \n    <Form bind:url={ url } on:click={ getMedia }></Form>\n    <Media media={ media }></Media>\n  </main>\n\n  <footer class=\"footer\">\n    Made with ‚ù§ by Husnul Anwari <br>\n    <a href=\"https://github.com/husnulhamidiah/instagram-downloader\">Github</a>\n  </footer>\n</div>",
    "<script>\n  export let url = ''\n</script>\n\n<style>\n  .input-large, .button-large {\n    height: 5rem;\n  }\n</style>\n\n<form>\n  <div class=\"row\">\n    <div class=\"column\">\n      <input class=\"input-large\" type=\"text\" placeholder=\"url\" id=\"url\" bind:value={ url }>\n      <p style=\"word-break: break-word;\">\n        Put url <span class=\"hero-detail\"><em>https://www.instagram.com/p/B7JqW9uA1mP/ </em></span>or just the code <span class=\"hero-detail\"><em>B7JqW9uA1mP</em></span>\n      </p>\n      <input class=\"button-primary button-large\" type=\"submit\" value=\"Submit\" on:click|preventDefault>\n    </div>\n    <div class=\"column\"></div>\n  </div>\n</form>\n",
    "<script>\n  export let media = []\n  let video\n\n  $: media = chunk(media, 3)\n  $: (media && video) ? video.load() : null\n\n  const chunk = (array, size) => Array(Math.ceil(array.length / size))\n    .fill()\n    .map((_, index) => index * size)\n    .map(begin => array.slice(begin, begin + size))\n\n  const onClickHandler = ({ target }) => {\n    const src = target.getAttribute('data-source')\n    if (src) window.open(src)\n  }\n</script>\n\n<style>\n  .media {\n    margin: 3rem 0;\n    max-width: fit-content;\n  }\n  \n  .media-video {\n    max-width: 100%;\n  }\n\n  [popover-bottom] {\n    position: relative\n  }\n\n  [popover-bottom]:hover::after {\n    opacity: 1;\n    transition: opacity .2s ease-out\n  }\n\n  [popover-bottom]::after {\n    transition: opacity 235ms ease-in-out 0s;\n    background: rgba(0, 0, 0, .7);\n    color: #fff;\n    font-size: .8em;\n    left: 50%;\n    min-width: 10rem;\n    opacity: 0;\n    padding: .4em 2em;\n    position: absolute;\n    text-align: center;\n    top: -6px;\n    -webkit-transform: translateX(-50%) translateY(-100%);\n    transform: translateX(-50%) translateY(-100%)\n  }\n\n  [popover-bottom]::before {\n    margin-top: 8px;\n    top: 100%;\n    -webkit-transform: translateX(-50%) translatey(-100%) rotate(-180deg);\n    transform: translateX(-50%) translatey(-100%) rotate(-180deg)\n  }\n\n  [popover-bottom]::after {\n    content: attr(popover-bottom);\n    margin-top: 8px;\n    top: 100%;\n    -webkit-transform: translateX(-50%) translateY(0);\n    transform: translateX(-50%) translateY(0)\n  }\n</style>\n\n{#each media as chunk, i}\n  <div class=\"row\">\n    {#each chunk as medium, j}\n      {#if medium && medium.src && medium.typename}\n        <div class=\"column\">\n          <div popover-bottom=\"Download\" class=\"media\" on:click={ onClickHandler } data-source={ medium.src }>\n            {#if medium.typename == 'GraphImage'}\n              <img src={ medium.src } alt=\"media\">\n            {:else}\n              <video class=\"media-video\" bind:this={ video } controls>\n                <source src={ medium.src } type=\"video/mp4\">\n              </video>\n            {/if}\n          </div>\n        </div>\n      {/if}\n    {/each}\n  </div>\n{/each}\n\n<!-- <div class=\"row row-wrap\">\n  {#each media as medium, i}\n    {#if medium && medium.src && medium.typename}\n      <div class=\"column column-33\">\n        <div class=\"media\" on:click={ onClickHandler } data-source={ medium.src }>\n          {#if medium.typename == 'GraphImage'}\n            <img src={ medium.src } alt=\"media\">\n          {:else}\n            <video bind:this={ video } controls>\n              <source src={ medium.src } type=\"video/mp4\">\n            </video>\n          {/if}\n        </div>\n      </div>\n    {/if}\n  {/each}\n</div> -->\n"
  ],
  "names": [],
  "mappings": "AAsEE,OAAO,eAAC,CAAC,AACP,UAAU,CAAE,IAAI,CAChB,SAAS,CAAE,GAAG,AAChB,CAAC,AACD,OAAO,eAAC,CAAC,AACP,MAAM,CAAE,IAAI,CAAC,IAAI,AACnB,CAAC,AACD,MAAM,OAAO,eAAC,CAAC,AACb,WAAW,CAAE,MAAM,CAAC,KAAK,CAAC,OAAO,AACnC,CAAC;AC1ED,2BAAY,CAAE,aAAa,eAAC,CAAC,AAC3B,MAAM,CAAE,IAAI,AACd,CAAC;ACYD,MAAM,eAAC,CAAC,AACN,MAAM,CAAE,IAAI,CAAC,CAAC,CACd,SAAS,CAAE,WAAW,AACxB,CAAC,AAED,YAAY,eAAC,CAAC,AACZ,SAAS,CAAE,IAAI,AACjB,CAAC,AAED,CAAC,cAAc,CAAC,eAAC,CAAC,AAChB,QAAQ,CAAE,QAAQ;EACpB,CAAC,AAED,CAAC,cAAc,gBAAC,MAAM,OAAO,AAAC,CAAC,AAC7B,OAAO,CAAE,CAAC,CACV,UAAU,CAAE,OAAO,CAAC,GAAG,CAAC,QAAQ;EAClC,CAAC,AAED,CAAC,cAAc,gBAAC,OAAO,AAAC,CAAC,AACvB,UAAU,CAAE,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,EAAE,CACxC,UAAU,CAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAC7B,KAAK,CAAE,IAAI,CACX,SAAS,CAAE,IAAI,CACf,IAAI,CAAE,GAAG,CACT,SAAS,CAAE,KAAK,CAChB,OAAO,CAAE,CAAC,CACV,OAAO,CAAE,IAAI,CAAC,GAAG,CACjB,QAAQ,CAAE,QAAQ,CAClB,UAAU,CAAE,MAAM,CAClB,GAAG,CAAE,IAAI,CACT,iBAAiB,CAAE,WAAW,IAAI,CAAC,CAAC,WAAW,KAAK,CAAC,CACrD,SAAS,CAAE,WAAW,IAAI,CAAC,CAAC,WAAW,KAAK,CAAC;EAC/C,CAAC,AAED,CAAC,cAAc,gBAAC,QAAQ,AAAC,CAAC,AACxB,UAAU,CAAE,GAAG,CACf,GAAG,CAAE,IAAI,CACT,iBAAiB,CAAE,WAAW,IAAI,CAAC,CAAC,WAAW,KAAK,CAAC,CAAC,OAAO,OAAO,CAAC,CACrE,SAAS,CAAE,WAAW,IAAI,CAAC,CAAC,WAAW,KAAK,CAAC,CAAC,OAAO,OAAO,CAAC;EAC/D,CAAC,AAED,CAAC,cAAc,gBAAC,OAAO,AAAC,CAAC,AACvB,OAAO,CAAE,KAAK,cAAc,CAAC,CAC7B,UAAU,CAAE,GAAG,CACf,GAAG,CAAE,IAAI,CACT,iBAAiB,CAAE,WAAW,IAAI,CAAC,CAAC,WAAW,CAAC,CAAC,CACjD,SAAS,CAAE,WAAW,IAAI,CAAC,CAAC,WAAW,CAAC,CAAC;EAC3C,CAAC"
}